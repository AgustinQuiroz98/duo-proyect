<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Congressy Editar Conferenica</title>
    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}" />
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"
    ></script>
    <script src="{{url_for('static', filename='edit-congress.js')}}"></script>
  </head>
  <body>
    <nav>
      <div class="nav-links">
        <a href="/congress/">
          <img
            src="{{url_for('static', filename='Congressy-logo.png')}}"
            alt="Congressy logo"
          />
        </a>
        <a href="/congress/">Conferencias</a>
        <a href="/my-congress/">Mis Conferencias</a>
      </div>
      <a class="nav-profile" href="/profile/">
        <p>{{session['nombre']}}</p>
        {% if session['imagenPerfil'] %}
        <img
          src="{{url_for('uploads', filename=session['imagenPerfil'])}}"
          alt="imagen perfil"
          class="profile-img"
        />
        {% else %}
        <img
          src="{{url_for('static', filename='usuario-de-perfil.png')}}"
          alt="icono imagen"
          class="profile-img"
        />
        {% endif %}
      </a>
    </nav>
    {% if conferencia %}
    <div class="container create-container">
      <div class="create-title">
        <h1>Editar Conferencia</h1>
        <span class="medal">Campos obligatorios (*)</span>
      </div>
      <ul id="error-messages">
        {% for error in errors %}
        <li class="error">{{error}}</li>
        {% endfor %} {% for message in status %}
        <li class="success">{{message}}</li>
        {% endfor %}
      </ul>
      <form action="/create/" method="POST" id="create-congress">
        <h2>Datos Conferencia</h2>
        {% if conferencia.imagen != '' %}
        <label for="imagen" class="form-label"
          >Imagen Actual Conferencia:</label
        >
        <img
          src="{{url_for('uploads', filename=conferencia.imagen)}}"
          alt="imagen perfil"
          class="img-congress-edit"
        />
        {% endif %}
        <div class="row">
          <div class="mb-3 col-lg-4">
            <label for="imagen" class="form-label">Imagen Conferencia</label>
            <input
              class="form-control"
              type="file"
              name="imagen"
              accept="image/*"
              value="{{conferencia.imagen}}"
            />
            <input
              class="form-control"
              type="text"
              name="imagenPrevia"
              value="{{conferencia.imagen}}"
              hidden
            />
          </div>
          <div class="mb-3 col-lg-4">
            <label class="form-label" for="nombre">Nombre (*)</label>
            <input
              class="form-control"
              type="text"
              name="nombre"
              placeholder="Ingrese el nombre de la Conferencia"
              value="{{conferencia.nombre}}"
            />
          </div>
          <div class="mb-3 col-lg-4">
            <label class="form-label" for="fecha">Fecha (*)</label>
            <input
              class="form-control"
              type="date"
              name="fecha"
              value="{{conferencia.fecha}}"
            />
          </div>
          <div class="mb-3 col-lg-4">
            <label class="form-label" for="hora_inicio">Hora Inicio (*)</label>
            <input
              class="form-control"
              type="time"
              name="hora_inicio"
              value="{{conferencia.hora_inicio}}"
            />
          </div>
          <div class="mb-3 col-lg-4">
            <label class="form-label" for="hora_termino"
              >Hora Termino (*)</label
            >
            <input
              class="form-control"
              type="time"
              name="hora_termino"
              value="{{conferencia.hora_termino}}"
            />
          </div>
          <div class="mb-3 col-lg-4">
            <label class="form-label" for="linkUbicacion"
              >Link Ubicación (*)</label
            >
            <input
              class="form-control"
              type="url"
              name="linkUbicacion"
              pattern="https://.*"
              placeholder="ej: https://maps.app.goo.gl/sBsuX8ASca24VuxC6"
              value="{{conferencia.linkUbicacion}}"
            />
          </div>
          <div class="mb-3 col-lg-4">
            <label class="form-label" for="tipo">Tipo de conferencia (*)</label>
            <select
              class="form-select"
              name="tipo"
              value="{{conferencia.tipo}}"
            >
              <option value="public">Pública</option>
              <option value="private">Privada</option>
            </select>
          </div>
          <div class="mb-3 col-lg-4 optional-field">
            <label class="form-label" for="linkInscripcion"
              >Link Inscripción (*)</label
            >
            <input
              class="form-control"
              type="url"
              name="linkInscripcion"
              pattern="https://.*"
              placeholder="ej: https://example.com/"
              value="{{conferencia.linkInscripcion}}"
            />
          </div>
        </div>
        <div class="group-form-title">
          <h2>Datos Speaker</h2>
          <span class="medal">
            En caso de ser mas de 1 speaker haga click <br />
            en el signo mas para agregar mas formularios
          </span>
        </div>
        <div class="row speaker-row">
          {% for speaker in conferencia.speaker %}
          <div class="row speaker-content speaker-{{loop.index}}">
            <div class="mb-3 col-lg-12">
              <label for="imagen" class="form-label"
                >Imagen Actual Speaker {{loop.index}}:</label
              >
              {% if speaker.imagen != '' and speaker.imagen %}
              <img
                src="{{url_for('uploads', filename=speaker.imagen)}}"
                alt="imagen perfil"
                class="img-congress-edit"
              />
              {% else %}
              <img
                src="{{url_for('static', filename='photo.png')}}"
                alt="imagen perfil"
                class="img-congress-edit"
              />
              {% endif %}
            </div>
            <div class="mb-3 col-lg-4">
              <label for="imagenSpeaker" class="form-label"
                >Imagen Speaker {{loop.index}}</label
              >
              <input
                class="form-control"
                type="file"
                name="imagenSpeaker{{loop.index}}"
                accept="image/*"
                value="{{speaker.imagen}}"
              />
              <input
                type="text"
                name="imagenPreviaSpeaker{{loop.index}}"
                value="{{speaker.imagen}}"
                hidden
              />
            </div>
            <div class="mb-3 col-lg-4">
              <label class="form-label" for="nombre"
                >Nombre Speaker {{loop.index}} (*)</label
              >
              <input
                class="form-control"
                type="text"
                name="nombreSpeaker{{loop.index}}"
                placeholder="Ingrese el nombre del Speaker"
                value="{{speaker.nombre}}"
              />
            </div>
            <div class="mb-3 col-lg-4">
              <label class="form-label" for="email"
                >Correo Speaker {{loop.index}}</label
              >
              <input
                class="form-control"
                type="text"
                name="emailSpeaker{{loop.index}}"
                placeholder="Ingrese el correo del Speaker"
                value="{{speaker.email}}"
              />
            </div>
            <div class="mb-3 col-lg-4">
              <label class="form-label" for="linkedin"
                >linkedin Speaker {{loop.index}}</label
              >
              <input
                class="form-control"
                type="text"
                name="linkedinSpeaker{{loop.index}}"
                placeholder="Ingrese el linkedin del Speaker"
                value="{{speaker.linkedin}}"
              />
            </div>
            <div class="mb-3 col-lg-4">
              <label class="form-label" for="cargo"
                >Cargo Speaker {{loop.index}}</label
              >
              <input
                class="form-control"
                type="text"
                name="cargoSpeaker{{loop.index}}"
                placeholder="Ingrese el cargo del Speaker"
                value="{{speaker.cargo}}"
              />
            </div>
            <div class="mb-3 col-lg-4">
              <label class="form-label" for="Empresa"
                >Empresa Speaker {{loop.index}}</label
              >
              <input
                class="form-control"
                type="text"
                name="empresaSpeaker{{loop.index}}"
                placeholder="Ingrese la Empresa del Speaker"
                value="{{speaker.empresa}}"
              />
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="btn-plus-container">
          <img
            class="add-remove-icon remove"
            src="{{url_for('static', filename='delete.png')}}"
            alt="plus icon"
            id="remove-speaker"
          />
          <img
            class="add-remove-icon add"
            src="{{url_for('static', filename='plus.png')}}"
            alt="plus icon"
            id="add-speaker"
          />
        </div>
        <div class="group-form-title">
          <h2>Adjuntar Contenido</h2>
          <span class="medal">
            Seleccione el tipo de contenido que desea agregar y<br />
            luego presione el boton "+", para agregar el campo deseado
          </span>
        </div>
        <div class="row">
          <label class="form-label d-block" for="tipo_contenido"
            >Tipo de contenido</label
          >
          <div class="mb-3 content-type col-lg-4">
            <select class="form-select d-inline-block" name="tipo_contenido">
              <option value="archive">Archivo</option>
              <option value="link">Link</option>
            </select>
            <img
              class="add-remove-icon add d-inline-block"
              src="{{url_for('static', filename='plus.png')}}"
              alt="plus icon"
              id="add-content"
            />
          </div>
          <div class="row content-row">
            {% for contenido in conferencia.contenido %} {% if contenido.tipo ==
            'file' %}
            <div class="mb-3 content-item col-lg-6 contenido-{{loop.index}}">
              <a
                href="{{contenido.contenido}}"
                target="_blank"
                rel="noopener noreferrer"
              >
                <img
                  src="{{url_for('static', filename='document.png')}}"
                  alt="file icon"
                  class="file-icon-edit"
                />
              </a>
              <input
                class="form-control"
                type="file"
                name="contenido-{{loop.index}}"
                value="{{contenido.contenido}}"
              />
              <input
                class="form-control"
                type="text"
                name="contenidoPrevio-{{loop.index}}"
                value="{{contenido.contenido}}"
                hidden
              />
              <img
                class="add-remove-icon add d-inline-block"
                src="/static/delete.png"
                alt="plus icon"
                id="remove-content-{{loop.index}}"
                onclick="removeContent({{loop.index}})"
              />
            </div>
            {% else %}
            <div class="mb-3 content-item col-lg-6 contenido-{{loop.index}}">
              <a
                href="{{url_for('uploads', filename=contenido.contenido)}}"
                target="_blank"
                rel="noopener noreferrer"
              >
                <img
                  src="{{url_for('static', filename='url.png')}}"
                  alt="file icon"
                  class="file-icon-edit"
                />
              </a>
              <input
                class="form-control"
                type="text"
                name="contenido-{{loop.index}}"
                placeholder="Ingrese el url del contenido de la Conferencia"
                value="{{contenido.contenido}}"
              />
              <img
                class="add-remove-icon add d-inline-block"
                src="/static/delete.png"
                alt="plus icon"
                id="remove-content-{{loop.index}}"
                onclick="removeContent({{loop.index}})"
              />
            </div>
            {% endif %}{% endfor %}
          </div>
        </div>
        <div class="mb-3 text-end">
          <button type="submit" class="btn btn-submit">
            Actualizar Conferencia
          </button>
        </div>
      </form>
    </div>
    {% endif %}
  </body>
</html>
